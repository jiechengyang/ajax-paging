function bootstable(t,i){t||(t={});var a=this;this.init=function(){this.paging=!0;for(var i in t)void 0!=t[i]&&(this[i]=t[i]);void 0==this.htmlHeadString&&(this.htmlHeadString=""),void 0==this.htmlBodyString&&(this.htmlBodyString=""),void 0==this.htmlFooterString&&(this.htmlFooterString=""),void 0==this.pagingString&&(this.pagingString=""),void 0==this.loadingContent&&(this.loadingContent=""),void 0==this.fields&&(this.fields=""),void 0==this.async&&(this.async=!1),void 0==this.defaultShowPageNumber&&(this.defaultShowPageNumber=6),void 0==this.step&&(this.step=2),void 0==this.pagingStyle&&(this.pagingStyle="base"),void 0==this.otherData&&(this.otherData={}),this.currentPage=1,this.rand=this.getRand(),this.loadData(this.otherData)},this.loadData=function(t){console.log("传递的参数有:",t);for(var i in t)""==t[i]&&null==t[i]&&void 0==t[i]||(this.otherData[i]=t[i]);this.currentPage=1,this.__create()},this.__create=function(){if(this.domObject=document.getElementById(i),this.htmlHeadString&&(this.htmlHeadString=""),this.htmlBodyString&&(this.htmlBodyString=""),this.htmlFooterString&&(this.htmlFooterString=""),this.pagingString&&(this.pagingString=""),this.fields&&(this.fields=""),"table"==this.viewType){this.htmlString='<table class="table table-hover" id="mainbody_'+this.rand+'"><thead>',this.htmlHeadString+="<tr>";for(var t in this.columns){var a=this.columns[t].text;this.htmlHeadString+="<th>"+a+"</th>"}this.htmlHeadString+="</tr></thead>",this.htmlFooterString="</table>"}else"ul"==this.viewType?(this.htmlString='<ul class="post-list" id="mainbody_'+this.rand+'">',this.htmlFooterString="</ul>"):"div"==this.viewType&&(this.htmlString='<div class="media" id="mainbody_'+this.rand+'">',this.htmlFooterString="</div>");for(var t in this.columns){var e=this.columns[t].dataIndex;this.fields+=e+","}var s={fields:this.fields.substr(0,this.fields.length-1),pageSize:this.pageSize,page:this.currentPage,table:this.table,searchParams:{}};this.otherData&&(s.searchParams=this.otherData,console.log("搜索请求的参数有：",s)),this.htmlString+=this.htmlHeadString+this.htmlBodyString+this.htmlFooterString,this.htmlString+='<div id="paging_'+this.rand+'"></div><div id="ajax_loading_'+this.rand+'"  class="text-center fullscreen" style="position: absolute;z-index: 999;background: #000;text-align: center;opacity: 0.5;top: 0;left: 0;left: 50%;margin-left: -50%;"></div>',$(this.domObject).html(this.htmlString),this._request("POST",s,"json"),$(this.domObject).css("position","relative")},this.__createBody=function(t){console.log("接口返回的记录集：",t,this.viewType);for(var i in t)if("table"==this.viewType){this.htmlBodyString+="<tr>";for(var a in this.columns){var e=this.columns[a].dataIndex;this.htmlBodyString+="<td>"+t[i][e]+"</td>"}this.htmlBodyString+="</tr>"}else if("ul"==this.viewType){this.htmlBodyString+="<li>";for(var a in this.columns){var e=this.columns[a].dataIndex;e.indexOf("created_at")>-1?this.htmlBodyString+='<div class="pull-right">'+t[i][e]+"</div>":this.htmlBodyString+="<a>"+t[i][e]+"</a>"}this.htmlBodyString+="</li>"}else"div"==this.viewType&&(this.htmlBodyString+='<div class="media">',this.htmlBodyString+='<div class="media-left"><img class="media-object" src='+t[i].cover+"></div>",this.htmlBodyString+='<div class="media-body"><h4 class="media-heading" style="color: green;"><b>'+t[i].title+'</b></h4><div class="media-content" style="text-indent: 2em; height: 80px; overflow: hidden;">'+t[i].content+"</div></div>",this.htmlBodyString+="</div>");$("#mainbody_"+this.rand).html(this.htmlBodyString),this.paging&&this._paging(),this.showLoadIng&&this._createLoading()},this._paging=function(){var t="",e="";if(this.prevpage=1==this.currentPage?1:this.currentPage-1,this.nextpage=this.currentPage==this.countPage?this.countPage:parseInt(this.currentPage)+1,"base"==this.pagingStyle){t=1==this.currentPage?'<li class="first disabled"><span>首页</span></li><li class="prev disabled"><span>上一页</span></li>':'<li class="first first_paging_'+this.rand+'"><a href="javascript:;" data-page="1">首页</a></li><li  class="prev prev_paging_'+this.rand+'"class="prev prev_paging_'+this.rand+'"><a href="javascript:;" data-page="'+this.prevpage+'">上一页</a></li>',e=this.currentPage==this.countPage?'<li class="next disabled"><span>下一页</span></li><li class="last disabled"><span>尾页</span></li>':'<li class="next next_paging_'+this.rand+'"><a href="javascript:;" data-page="'+this.nextpage+'">下一页</a></li><li class="last last_paging_'+this.rand+'" ><a href="javascript:;" data-page="'+this.countPage+'">尾页</a></li>';for(var s=1;s<=this.countPage;s++){var n=this.currentPage==s?"active":"";this.pagingString+='<li class="paging_yema_'+this.rand+" "+n+'"><a href="javascript:;" data-page="'+s+'">'+s+"</a></li>"}}else{var s=1,h=this.defaultShowPageNumber,r=this.step;if(this.currentPage>1&&(t='<li class="prev prev_paging_'+this.rand+'"><a href="javascript:;" data-page="'+this.prevpage+'">上一页</a></li>'),this.currentPage+r>h){var l=1==this.currentPage?"active":"";t='<li class="prev prev_paging_'+this.rand+'"><a href="javascript:;" data-page="'+this.prevpage+'">上一页</a></li><li class="paging_yema_'+this.rand+" "+l+'"><a href="javascript:;" data-page="1">1</a></li><li><span>...</span></li>',this.countPage-this.currentPage<r?(r=this.countPage-this.currentPage,s=this.currentPage-this.defaultShowPageNumber+this.step,console.log("step is:%d",r)):s=this.currentPage-r,h=this.currentPage+r}for(s;s<=h;s++){var n=this.currentPage==s?"active":"";this.pagingString+='<li class="paging_yema_'+this.rand+" "+n+'"><a href="javascript:;" data-page="'+s+'">'+s+"</a></li>"}this.currentPage<this.countPage&&(e='<li><span>...</span></li><li class="next next_paging_'+this.rand+'"><a href="javascript:;" data-page="'+this.nextpage+'">下一页</a></li>')}$("#"+i+" #paging_"+this.rand).html('<ul class="pagination pull-right">'+t+this.pagingString+e+"</ul>"),$(".paging_yema_"+this.rand).bind("click",function(t){var i=$(this).children("a").data("page")?$(this).children("a").data("page"):$(this).children("a").attr("data-page");a.currentPage=i,a.showLoadIng=!0,a.__create()}),$(".first_paging_"+this.rand).bind("click",function(t){var i=$(this).children("a").data("page")?$(this).children("a").data("page"):$(this).children("a").attr("data-page");a.currentPage=i,a.showLoadIng=!0,a.__create()}),$(".prev_paging_"+this.rand).bind("click",function(t){var i=$(this).children("a").data("page")?$(this).children("a").data("page"):$(this).children("a").attr("data-page");a.currentPage=i,a.showLoadIng=!0,a.__create()}),$(".next_paging_"+this.rand).bind("click",function(t){var i=$(this).children("a").data("page")?$(this).children("a").data("page"):$(this).children("a").attr("data-page");a.currentPage=i,a.showLoadIng=!0,a.__create()}),$(".last_paging_"+this.rand).bind("click",function(t){var i=$(this).children("a").data("page")?$(this).children("a").data("page"):$(this).children("a").attr("data-page");a.currentPage=i,a.showLoadIng=!0,a.__create()})},this._createLoading=function(){if($("#ajax_loading_"+this.rand).html(this.loadingContent),this.loadingContent){var t=$(this.domObject).height()?$(this.domObject).height():300;$("#ajax_loading_"+this.rand).width($(this.domObject).width()+20),this.async&&($("#ajax_loading_"+this.rand).height(t),$(".data_loading_"+this.rand).children("img").height(t))}},this._request=function(t,i,e){this.jsonData=i,e=e||"html",jQuery.ajax({type:t,async:a.async,data:i,url:this.url,dataType:e,timeout:1e4,success:function(t){a.totalCount=t.totalCount,a.countPage=Math.ceil(a.totalCount/a.pageSize),console.log("countPage",a.countPage,a.currentPage),t.totalCount>0&&a.__createBody(t.rows)},beforeSend:function(){a.loadingContent='<div class="data_loading_'+a.rand+'"><img src="static/images/data-loading.gif" style="max-width:100%;line-height:100px"  height="100"/></div>',a._createLoading()},complete:function(t,i){console.log("XMLHttpRequest.status",t.status),console.log("XMLHttpRequest.readyState",t.readyState),console.log("textStatus",i),setTimeout(function(){200==t.status?$("#ajax_loading_"+a.rand).fadeOut():$(a.domObject).children(" #ajax_loading_"+a.rand).html("请求失败")},200)},error:function(t,i,a){}})},this.getRand=function(){var t;return t=""+(new Date).getTime(),t+="_"+parseInt(9999*Math.random())}}window.utils_html=function(t,i){var a=new bootstable(t,i);return a.init(),a};